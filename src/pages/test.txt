import { createSlice } from '@reduxjs/toolkit';
import { toast } from 'react-toastify';
const initialState = {
  favouriteItems: localStorage.getItem('favouriteItems')
    ? JSON.parse(localStorage.getItem('favouriteItems'))
    : [],
};

const favouriteSlice = createSlice({
  name: 'favourite',
  initialState,
  reducers: {
    addTfavourite(state, action) {
      const itamindex = state.favouriteItems.findIndex(
        (item) => item._id === action.payload._id
      );
      //check if item in cart -1 not exect 0 exect
      if (itamindex >= 0) {
        //if 0  qantity increase not indexs
        state.favouriteItems[itamindex].cartQuantity += 1;
        toast.info(
          ` increased ${state.favouriteItems[itamindex].name} quantity`,
          {}
        );
        localStorage.setItem('favouriteItems', JSON.stringify(state.favouriteItems));
      } else {
       const elemints = state.favouriteItems.filter(
         (pro) => pro._id !== action.payload._id
       );
       console.log(elemints);
       state.favouriteItems = elemints;
       localStorage.setItem(
         'favouriteItems',
         JSON.stringify(state.favouriteItems)
       );
       toast.error(`${action.payload.name} removed to cart`, {});
        
      }
      // store at local storage
    },
  },
});
export default favouriteSlice.reducer;
export const {addTfavourite,removeFromfavourite} = favouriteSlice.actions